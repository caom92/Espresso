include ../log-ionic-materialize.pug

div
  mz-card
    mz-card-title {{ 'Report Request' | translate:lang }}
    mz-card-content
      form([formGroup]='dateRangeForm', (ngSubmit)='requestReports()')
        .row
          mz-datepicker-container.col.s6.m6.l6
            i(mz-icon-mdi, mz-input-prefix, [icon]="'calendar'")
            input(mz-datepicker, label="{{ 'Log.start_date' | translate:lang }}", type='text', formControlName='start_date', [options]='options')
          mz-datepicker-container.col.s6.m6.l6
            i(mz-icon-mdi, mz-input-prefix, [icon]="'calendar'")
            input(mz-datepicker, label="{{ 'Log.final_date' | translate:lang }}", type='text', formControlName='end_date', [options]='options')
        block additionalFormElements
          .row(*ngIf="suffix == 'gmp-doc-control-doc-control' || suffix == 'gap-doc-control-doc-control'")
            +select("{{ 'Log.document' | translate:lang }}", false, 'document_id', false, 'document_select', "{{ 'Log.select_document' | translate:lang }}")
              +option("{{doc.name}}", "doc.id", false, false)(*ngFor="let doc of documentList")
        .row
          .col.s12.m12.l12.center
            button(mz-button)
              | {{ 'Open Report' | translate:lang }}
      form#pdf-form(method='POST', target='_blank', action='http://localhost/espresso/source/server/report/reportPDF.php', ngNoForm)
        input(type='hidden', name='lang', [ngModel]='dateRangeReport.lang')
        input(type='hidden', name='content', [ngModel]='dateRangeReport.content')
        input(type='hidden', name='style', [ngModel]='dateRangeReport.style')
        input(type='hidden', name='company', [ngModel]='dateRangeReport.company')
        input(type='hidden', name='address', [ngModel]='dateRangeReport.address')
        input(type='hidden', name='logo', [ngModel]='dateRangeReport.logo')
        input(type='hidden', name='orientation', [ngModel]='dateRangeReport.orientation')
        input(type='hidden', name='fontsize', [ngModel]='dateRangeReport.fontsize')
        input(type='hidden', name='footer', [ngModel]='dateRangeReport.footer')
        input(type='hidden', name='supervisor', [ngModel]='dateRangeReport.supervisor')
        input(type='hidden', name='signature', [ngModel]='dateRangeReport.signature')
        .row(*ngIf='reports.length != 0')
          .col.s12.m12.l12.center
            div
              button(mz-button, (click)='requestPDFReport()') {{ 'Log.pdf_report' | translate:lang }}
  block loader
    report-loader(#reports, *ngFor='let report of reports', [report]='report', [activeReport]='activeReport', [suffix]='suffix', [footer]='footer')