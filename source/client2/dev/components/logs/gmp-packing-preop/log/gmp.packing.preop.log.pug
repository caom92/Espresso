include ../../../log-ionic-materialize.pug

+fullLogWrapper()
  div(*ngIf='showLog == true')
    block header
      log-header([log]='logHeaderData', [dateGroup]='captureForm')
    form([formGroup]='captureForm', (ngSubmit)='save()')
      +card()
        +cardContent()
          +textArea("{{ 'Log.subject' | translate:lang }}", "account-group", "subject")
          +errorMessage('!captureForm.controls.subject.valid && captureForm.controls.subject.dirty', "{{ 'LogErrors.gmp-packing-preop.subject_length' | translate:lang }}")
      gmp-packing-preop-area(*ngFor='let area of log.areas.logs; let i=index', [area]='area', [actions]='log.areas.corrective_actions', [group]='captureForm.controls.areas.controls[i]')
      +card()
        +cardHeader("{{ 'Log.complementary_information' | translate:lang }}")
        +cardContent()
          +textArea("{{ 'Log.notes_of' | translate:lang }} {{log.log_name}}", "clipboard", "notes")
          +errorMessage('!captureForm.controls.notes.valid && captureForm.controls.notes.dirty', "{{ 'LogErrors.gmp-packing-preop.comment_length' | translate:lang }}")
          +textArea("{{ 'Log.external_link_of' | translate:lang }} {{log.log_name}}", "link-variant", "album_url")
          +errorMessage('!captureForm.controls.album_url.valid && captureForm.controls.album_url.dirty', "{{ 'LogErrors.gmp-packing-preop.album_length' | translate:lang }}")
      block buttonRow
        +sendLogButton("{{ 'Log.send_report' | translate:lang }}")